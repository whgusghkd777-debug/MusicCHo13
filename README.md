

# MuSuBi（結び）

> **検索しない音楽体験**
> 共感でつながる音楽コミュニティ

---

## 1. プロジェクト概要

**MuSuBi（結び）**は、
再生数や検索中心の音楽体験ではなく、
**「共感（いいね）」を通じて音楽と出会うこと**を目的とした
音楽共有Webアプリケーションです。

ユーザーは

* YouTubeの音楽
* 自身でアップロードした音源

を投稿し、
コメントと共感によって音楽を介したつながりを生み出します。

---

## 2. なぜこのサービスを作ったのか（Why）

私は音楽を専攻しており、
既存の音楽プラットフォームにおける

* 数字（再生数・ランキング）中心の評価
* 検索ありきの受動的な音楽体験

に違和感を持っていました。

> **音楽は「探すもの」ではなく、
> 偶然出会い、共感する体験でも良いのではないか**

この考えを形にするため、
MuSuBiではあえて**検索機能を実装しない**という選択をしました。

---

## 3. 検索機能をあえて実装しなかった理由

一般的なWebサービスでは検索は必須機能ですが、
MuSuBiでは次の点を優先しました。

* 既に知っている音楽を探すこと
* 他人の共感を通じて新しい音楽に出会うこと

そのため、

* 最新投稿一覧
* 共感（いいね）数を基準としたランキング

を中心に設計しています。

 これは機能不足ではなく、
**サービスの思想を優先した設計判断**です。

---

## 4. サービス名の意味

**MuSuBi（結び）**は

* Music
* 結び（人と人をつなぐ）

を組み合わせた造語です。

音楽を通じて
ユーザー同士が自然につながる場所、
その意味を込めています。

---

## 5. 主な機能

###  音楽投稿

* YouTube URL投稿
* 音源ファイルアップロード
* YouTube動画IDを抽出し、サムネイルを自動生成

###  共感（いいね）

* ログインユーザーのみ可能
* 単なる数値ではなく「誰が共感したか」を保持

###  共感ベースのランキング

* 再生数ではなく共感数を基準
* 音楽の「人気」より「推薦」に近い概念

### コメント

* 音楽ごとのコメント機能
* 音楽削除時にコメントも連動削除

###  権限管理

* USER / ADMIN ロール分離
* 管理者のみ削除操作が可能

---

## 6. 設計・実装のポイント（コード例付き）

###  ドメイン設計（共感を中心に）

共感機能は単なるカウントではなく、
**Music と User の関係**としてモデル化しました。

```java
@ManyToMany
Set<SiteUser> voter;
```


「何人に共感されたか」ではなく
**「誰に共感された音楽か」**を表現する設計です。

---

###  共感数ランキング設計

ランキングは再生数ではなく、
共感数を基準に取得します。

```java
@Query(
  value = "SELECT * FROM music ORDER BY " +
          "(SELECT COUNT(*) FROM music_voter WHERE music_id = music.id) DESC LIMIT 10",
  nativeQuery = true
)
List<Music> findTopRanking();
```


サービスの思想（共感重視）を
データ取得ロジックにも反映しています。

---

###  コメントのライフサイクル管理

音楽が削除された場合、
紐づくコメントも自動的に削除されるよう設計しています。

```java
@OneToMany(mappedBy = "music", cascade = CascadeType.REMOVE)
private List<Answer> answerList;
```


データ整合性と運用を考慮した設計です。

---

###  セキュリティ設計（運用視点）

Spring Security を用いて、
実際のサービス運営を想定した権限管理を行っています。

```java
.requestMatchers("/admin/**").hasRole("ADMIN")
.requestMatchers("/music/delete/**").hasRole("ADMIN")
```


誤操作・悪意ある操作を防ぐため、
破壊的処理は管理者権限のみに制限しています。

---

## 7. 使用技術

### Backend

* Java 21
* Spring Boot 3.2
* Spring Security
* Spring Data JPA（Hibernate）

### Frontend

* Thymeleaf
* HTML / CSS / JavaScript
  （AppleのUI思想を参考に、操作ボタンを最小限に）

### Database

* PostgreSQL

### Build / ETC

* Gradle
* Lombok

---

## 8. 苦労した点・学んだこと

* Spring Securityの認可設計
* 共感（いいね）機能のドメイン設計
* サービス思想をコードに落とし込む難しさ

特に
**「なぜこの機能を入れたか／入れなかったか」を
説明できる設計**を意識しました。

---

## 9. 今後の改善予定

* 例外処理（Global Exception Handler）
* ファイルアップロードのセキュリティ強化
* テストコード追加
* REST API構成への拡張検討

---

## 10. 開発者情報

* 名前：**チョ・ヒョンファン（조현황）**
* 専攻：音楽
* GitHub：本リポジトリ参照

---

##  このプロジェクトで伝えたいこと

* 技術の前に「なぜ作るか」を考える姿勢
* コードとサービス思想の一貫性
* 新卒・未経験でも運用を意識した設計視点

---

### 次にできること 


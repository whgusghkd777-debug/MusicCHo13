<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org" layout:decorate="~{layout}">
<section layout:fragment="content">
    <div style="max-width: 900px; margin: 0 auto; padding: 20px;">
        <h2 th:text="${music.title}" style="font-weight: 800;"></h2>
        <div th:if="${youtubeId}" style="aspect-ratio: 16/9; width: 100%; border-radius: 15px; overflow: hidden; margin-top: 20px;">
            <iframe th:src="@{|https://www.youtube.com/embed/${youtubeId}|}" style="width: 100%; height: 100%; border: none;" allowfullscreen></iframe>
        </div>

        <div style="margin-top: 50px; border-top: 2px solid #eee; padding-top: 30px;">
            <h4 th:text="|${#lists.size(music.answerList)}個のコメント|"></h4>
            
            <form th:action="@{|/music/answer/create/${music.id}|}" method="post" style="margin-top: 20px;">
                <textarea name="content" rows="3" required style="width: 100%; border: 1px solid #ddd; border-radius: 12px; padding: 15px; font-size: 1rem;"></textarea>
                <div style="display: flex; justify-content: flex-end; margin-top: 15px;">
                    <button type="submit" style="background: #007AFF; color: white; border: none; padding: 12px 30px; border-radius: 10px; font-weight: 700; cursor: pointer;">
                        コメントを書く
                    </button>
                </div>
            </form>
            
            <div th:each="answer : ${music.answerList}" style="margin-top: 20px; padding: 20px; background: #f8f8f8; border-radius: 12px;">
                <div th:text="${answer.content}"></div>
                <div style="margin-top: 10px; font-size: 0.8rem; color: #888;">
                    <span th:text="${answer.author.username}"></span> | <span th:text="${#temporals.format(answer.createDate, 'yyyy-MM-dd HH:mm')}"></span>
                </div>
            </div>
        </div>
    </div>
</section>
</html>